"use strict";function Preview(){this.currentFormat=0,this._bindSelectors(),this._bindEvents()}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};Preview.prototype._bindSelectors=function(){this.links=Array.prototype.slice.call(document.querySelectorAll("a")),this.iframe=document.querySelector("iframe"),this.sideBar=document.querySelector(".sidebar"),this.up=document.querySelector(".up"),this.down=document.querySelector(".down"),this.left=document.querySelector(".left"),this.right=document.querySelector(".right"),this.animPanelToggle=document.querySelector(".anim-panel-toggle")},Preview.prototype._bindEvents=function(){this._onKeyDown=this._onKeyDown.bind(this),this._onKeyUp=this._onKeyUp.bind(this),this._onClick=this._onClick.bind(this),document.addEventListener("keydown",this._onKeyDown),document.addEventListener("keyup",this._onKeyUp),this.animPanelToggle.addEventListener("click",this._animPanel.bind(this));for(var e=0;e<this.links.length;e++)this.links[e].addEventListener("click",this._onClick)},Preview.prototype._nextFormat=function(e){return e[this.currentFormat++]},Preview.prototype._prevFormat=function(e){return e[this.currentFormat--]},Preview.prototype._onKeyDown=function(e){switch(e.keyCode){case 37:e.preventDefault(),this.left.classList.add("active"),TweenLite.to(this.sideBar,1,{width:0,padding:0,ease:Power1.easeInOut});break;case 38:e.preventDefault(),this.up.classList.add("active"),this.iframe.src=this._prevFormat(this.links).href,this.currentFormat===-1&&(this.currentFormat=this.links.length-1);break;case 39:e.preventDefault(),this.right.classList.add("active"),TweenLite.to(this.sideBar,1,{width:200,padding:"0 40px",ease:Power1.easeInOut});break;case 40:e.preventDefault(),this.down.classList.add("active"),this.iframe.src=this._nextFormat(this.links).href,this.currentFormat===this.links.length&&(this.currentFormat=0)}},Preview.prototype._onKeyUp=function(e){e.preventDefault(),this.up.classList.remove("active"),this.right.classList.remove("active"),this.down.classList.remove("active"),this.left.classList.remove("active")},Preview.prototype._onClick=function(e){var t=this;if(e.preventDefault(),this.iframe.src=e.target.href,TweenLite.set(".iframe iframe",{autoAlpha:0}),TweenLite.set(".loading",{display:"block",autoAlpha:1}),"none"===this.animPanelToggle.style.display){var i=document.querySelector(".anim-panel");document.body.removeChild(i),this.animPanelToggle.style.display="block"}setTimeout(function(){var e=t.iframe.contentWindow.document.querySelector(".banner");e&&(TweenLite.set(".loading",{autoAlpha:0}),TweenLite.to(".iframe iframe",1,{autoAlpha:1}),TweenLite.set(e,{top:0,right:0,bottom:0,left:0,position:"absolute",margin:"auto"}))},1e3)},Preview.prototype._animPanel=function(e){var t=this;e.preventDefault();var i=t.iframe.contentWindow.banner;"object"===_typeof(i.timeline)&&(this.animPanelToggle.style.display="none",new AnimPanel(i.timeline))},document.addEventListener("DOMContentLoaded",function(){new Preview});